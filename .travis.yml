language: cpp

compiler: gcc

before_install:
 - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test -y
 - sudo apt-get update -qq
 
install:
 - sudo apt-get install -qq cmake
 - sudo apt-get install -qq g++-4.9
 - sudo apt-get install -qq cppcheck
 - export CXX="g++-4.9"

before_script:
 - mkdir -p build
 - cd build

script:
 - cmake ..
 - make
 - "./nid-test"
 - "./harc-test"
 - "./fabric-test"
 - cppcheck -I../daemon/includes --error-exitcode=2 ../daemon/src
 - ../tools/cpplint.py --filter=-whitespace/braces,-whitespace/tab,-build/c++11,-runtime/int,-runtime/references --extensions=hpp,cpp ../daemon/src/* ../daemon/includes/fdsb/*
